\hypertarget{_drop_creator_8cs_source}{}\doxysection{Drop\+Creator.\+cs}
\label{_drop_creator_8cs_source}\index{Samples$\sim$/Collisions/Dripwater/DropCreator.cs@{Samples$\sim$/Collisions/Dripwater/DropCreator.cs}}
\mbox{\hyperlink{_drop_creator_8cs}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00001}00001 \textcolor{keyword}{using} System.Collections;}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00002}00002 \textcolor{keyword}{using} System.Collections.Generic;}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00003}00003 \textcolor{keyword}{using} UnityEngine;}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00004}00004 }
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00005}00005 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespace_csound_1_1_samples_1_1_collisions_1_1_dripwater}{Csound.Samples.Collisions.Dripwater}}}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00006}00006 \{}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00007}\mbox{\hyperlink{class_csound_1_1_samples_1_1_collisions_1_1_dripwater_1_1_drop_creator}{00007}}     \textcolor{keyword}{public} \textcolor{keyword}{class }\mbox{\hyperlink{class_csound_1_1_samples_1_1_collisions_1_1_dripwater_1_1_drop_creator}{DropCreator}} : MonoBehaviour}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00008}00008     \{}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00009}00009         [SerializeField] GameObject \_dropPrefab;}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00010}00010         [SerializeField] \textcolor{keywordtype}{float} \_rate = 10; \textcolor{comment}{// drops / s}}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00011}00011         [SerializeField] \mbox{\hyperlink{class_csound_unity}{CsoundUnity}} \_csound;}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00012}00012         [SerializeField] \textcolor{keywordtype}{float} \_radius = 3.5f;}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00013}00013         [SerializeField] Vector2 \_randomHeightRange = \textcolor{keyword}{new} Vector2(4f, 7f);}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00014}00014 }
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00015}00015         Coroutine \_spawnCor;}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00016}00016         \textcolor{keyword}{private} \textcolor{keywordtype}{bool} \_spawning;}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00017}00017 }
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00018}\mbox{\hyperlink{class_csound_1_1_samples_1_1_collisions_1_1_dripwater_1_1_drop_creator_a977da22a4f071c4572ccec0ee9e1071a}{00018}}         \textcolor{keyword}{public} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_csound_1_1_samples_1_1_collisions_1_1_dripwater_1_1_drop_creator_a977da22a4f071c4572ccec0ee9e1071a}{SetSpawning}}(\textcolor{keywordtype}{bool} spawn)}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00019}00019         \{}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00020}00020             \_spawning = spawn;}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00021}00021         \}}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00022}00022 }
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00023}00023         \textcolor{comment}{// Start is called before the first frame update}}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00024}00024         \textcolor{keywordtype}{void} Start()}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00025}00025         \{}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00026}00026             \_spawnCor = StartCoroutine(Spawning());}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00027}00027         \}}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00028}00028 }
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00029}00029         IEnumerator Spawning()}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00030}00030         \{}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00031}00031             \textcolor{keywordflow}{while} (\textcolor{keyword}{true})}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00032}00032             \{}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00033}00033                 \textcolor{keywordflow}{while} (\_spawning)}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00034}00034                 \{}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00035}00035                     var randPos = \textcolor{keyword}{new} Vector3((Random.insideUnitCircle * \_radius).x,}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00036}00036                                                 Random.Range(\_randomHeightRange.x, \_randomHeightRange.y),}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00037}00037                                                 (Random.insideUnitCircle * \_radius).y);}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00038}00038                     var dropGO = Instantiate(\_dropPrefab, randPos, Quaternion.identity, \textcolor{keyword}{this}.transform);}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00039}00039                     var dripwater = dropGO.GetComponent<Dripwater>();}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00040}00040                     dripwater.Init(\_csound, \textcolor{keyword}{true});}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00041}00041 }
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00042}00042                     dripwater.OnCollision += () =>}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00043}00043                     \{}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00044}00044                         Destroy(dropGO);}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00045}00045                     \};}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00046}00046                     \textcolor{comment}{// wait before spawning again}}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00047}00047                     yield \textcolor{keywordflow}{return} \textcolor{keyword}{new} WaitForSeconds(1 / \_rate);}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00048}00048                 \}}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00049}00049                 \textcolor{comment}{// continue executing the routine to keep it alive}}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00050}00050                 yield \textcolor{keywordflow}{return} \textcolor{keyword}{null};}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00051}00051             \}}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00052}00052         \}}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00053}00053 }
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00054}00054         \textcolor{keyword}{private} \textcolor{keywordtype}{void} OnDestroy()}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00055}00055         \{}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00056}00056             StopCoroutine(\_spawnCor);}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00057}00057         \}}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00058}00058     \}}
\DoxyCodeLine{\Hypertarget{_drop_creator_8cs_source_l00059}00059 \}}

\end{DoxyCode}
