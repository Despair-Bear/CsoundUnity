\hypertarget{_initializer_8cs_source}{}\doxysection{Initializer.\+cs}
\label{_initializer_8cs_source}\index{Samples$\sim$/EnvironmentVars/SFDIR/Initializer.cs@{Samples$\sim$/EnvironmentVars/SFDIR/Initializer.cs}}
\mbox{\hyperlink{_initializer_8cs}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00001}00001 \textcolor{keyword}{using} System.IO;}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00002}00002 \textcolor{keyword}{using} UnityEngine;}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00003}00003 }
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00004}\mbox{\hyperlink{namespace_csound_1_1_environment_vars}{00004}} \textcolor{keyword}{namespace }\mbox{\hyperlink{namespace_csound_1_1_environment_vars}{Csound.EnvironmentVars}}}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00005}00005 \{}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00006}\mbox{\hyperlink{class_csound_1_1_environment_vars_1_1_initializer}{00006}}     \textcolor{keyword}{public} \textcolor{keyword}{class }\mbox{\hyperlink{class_csound_1_1_environment_vars_1_1_initializer}{Initializer}} : MonoBehaviour}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00007}00007     \{}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00008}00008         [Tooltip(\textcolor{stringliteral}{"{}The names of the sound font files to copy from Resources to the Persistent Data Path folder. "{}} +}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00009}00009             \textcolor{stringliteral}{"{}Don't specify the extension. In this example will be added the '.sf2' extension to the copied files."{}})]}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00010}00010         [SerializeField] \textcolor{keyword}{private} \textcolor{keywordtype}{string}[] \_soundFontsNames;}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00011}00011         [Tooltip(\textcolor{stringliteral}{"{}The CsoundUnity prefab that will be instantiated. "{}} +}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00012}00012             \textcolor{stringliteral}{"{}The GameObject is assumed to be active, so if you want to do other things before activating it, you will have to activate the CsoundUnityInstance GameObject by yourself"{}})]}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00013}00013         [SerializeField] \textcolor{keyword}{private} \mbox{\hyperlink{class_csound_unity}{CsoundUnity}} \_csoundUnityPrefab;}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00014}00014         [Tooltip(\textcolor{stringliteral}{"{}The CsoundUnity instance that you can reference in other scripts"{}})]}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00015}\mbox{\hyperlink{class_csound_1_1_environment_vars_1_1_initializer_ad62b17a3c88959a950b1b871f570cadc}{00015}}         \textcolor{keyword}{public} \mbox{\hyperlink{class_csound_unity}{CsoundUnity}} \mbox{\hyperlink{class_csound_1_1_environment_vars_1_1_initializer_ad62b17a3c88959a950b1b871f570cadc}{CsoundUnityInstance}};}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00016}00016 }
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00017}00017         \textcolor{comment}{// Start is called before the first frame update}}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00018}00018         \textcolor{keywordtype}{void} Start()}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00019}00019         \{}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00020}00020             \textcolor{keywordflow}{foreach} (var sfName \textcolor{keywordflow}{in} \_soundFontsNames)}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00021}00021             \{}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00022}00022                 var dir = Path.Combine(Application.persistentDataPath, \textcolor{stringliteral}{"{}CsoundFiles"{}});}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00023}00023                 \textcolor{keywordflow}{if} (!Directory.Exists(dir))}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00024}00024                     Directory.CreateDirectory(dir);}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00025}00025 }
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00026}00026                 var destinationPath = Path.Combine(dir, sfName + \textcolor{stringliteral}{"{}.sf2"{}});}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00027}00027                 \textcolor{keywordflow}{if} (!File.Exists(destinationPath))}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00028}00028                 \{}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00029}00029                     var sf = Resources.Load<TextAsset>(sfName);}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00030}00030                     Debug.Log(\$\textcolor{stringliteral}{"{}Writing sf file at path: \{destinationPath\}"{}});}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00031}00031                     Stream s = \textcolor{keyword}{new} MemoryStream(sf.bytes);}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00032}00032                     BinaryReader br = \textcolor{keyword}{new} BinaryReader(s);}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00033}00033                     \textcolor{keyword}{using} (BinaryWriter bw = \textcolor{keyword}{new} BinaryWriter(File.Open(destinationPath, FileMode.OpenOrCreate)))}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00034}00034                     \{}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00035}00035                         bw.Write(br.ReadBytes(sf.bytes.Length));}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00036}00036                     \}}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00037}00037                 \}}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00038}00038             \}}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00039}00039             \textcolor{comment}{// if you need to do something with Csound, use this instance!}}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00040}00040             \mbox{\hyperlink{class_csound_1_1_environment_vars_1_1_initializer_ad62b17a3c88959a950b1b871f570cadc}{CsoundUnityInstance}} = Instantiate(\_csoundUnityPrefab);}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00041}00041         \}}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00042}00042     \}}
\DoxyCodeLine{\Hypertarget{_initializer_8cs_source_l00043}00043 \}}

\end{DoxyCode}
