\hypertarget{_parameter_setter_8cs_source}{}\doxysection{Parameter\+Setter.\+cs}
\label{_parameter_setter_8cs_source}\index{Samples$\sim$/GranularSynthesis/Scripts/ParameterSetter.cs@{Samples$\sim$/GranularSynthesis/Scripts/ParameterSetter.cs}}
\mbox{\hyperlink{_parameter_setter_8cs}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00001}00001 \textcolor{keyword}{using} UnityEngine;}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00002}00002 \textcolor{keyword}{using} UnityEngine.UI;}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00003}00003 }
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00004}00004 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespace_csound_1_1_granular_synthesis_1_1_partikkel}{Csound.GranularSynthesis.Partikkel}}}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00005}00005 \{}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00006}\mbox{\hyperlink{class_csound_1_1_granular_synthesis_1_1_partikkel_1_1_parameter_setter}{00006}}     \textcolor{keyword}{public} \textcolor{keyword}{class }\mbox{\hyperlink{class_csound_1_1_granular_synthesis_1_1_partikkel_1_1_parameter_setter}{ParameterSetter}} : MonoBehaviour}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00007}00007     \{}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00008}00008         [Tooltip(\textcolor{stringliteral}{"{}The world canvas to be used for the caption"{}})]}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00009}00009         [SerializeField] \textcolor{keyword}{private} Canvas \_captionCanvas;}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00010}00010         [Tooltip(\textcolor{stringliteral}{"{}The caption inside the above canvas"{}})]}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00011}00011         [SerializeField] \textcolor{keyword}{private} Text \_caption;}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00012}00012         [Tooltip(\textcolor{stringliteral}{"{}How much the canvas will be scaled based on player distance"{}})]}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00013}00013         [SerializeField] \textcolor{keyword}{private} Vector2 \_canvasScaleRange = \textcolor{keyword}{new} Vector2(.01f, 1.25f);}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00014}00014         [Tooltip(\textcolor{stringliteral}{"{}How much the canvas will be vertically placed based on player distance"{}})]}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00015}00015         [SerializeField] \textcolor{keyword}{private} Vector2 \_canvasPosRange = \textcolor{keyword}{new} Vector2(1f, 2.25f);}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00016}00016         [Tooltip(\textcolor{stringliteral}{"{}How much force will be applied to repel another ParameterSetter, when colliding"{}})]}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00017}00017         [SerializeField] \textcolor{keyword}{private} \textcolor{keywordtype}{float} \_posCorrectionForce = 0.1f;}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00018}00018 }
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00019}00019         \textcolor{keyword}{private} \mbox{\hyperlink{class_csound_unity}{CsoundUnity}} \_csound;}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00020}00020         \textcolor{keyword}{private} \mbox{\hyperlink{class_csound_channel_controller}{CsoundChannelController}} \_xChan;}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00021}00021         \textcolor{keyword}{private} \mbox{\hyperlink{class_csound_channel_controller}{CsoundChannelController}} \_zChan;}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00022}00022         \textcolor{keyword}{private} Vector2 \_minPos;}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00023}00023         \textcolor{keyword}{private} Vector2 \_maxPos;}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00024}00024         \textcolor{keyword}{private} Vector3 \_lastPos;}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00025}00025         \textcolor{keyword}{private} GameObject \_player;}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00026}00026 }
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00027}\mbox{\hyperlink{class_csound_1_1_granular_synthesis_1_1_partikkel_1_1_parameter_setter_af7304565e2e47f2b252d2ed291af8b52}{00027}}         \textcolor{keyword}{public} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_csound_1_1_granular_synthesis_1_1_partikkel_1_1_parameter_setter_af7304565e2e47f2b252d2ed291af8b52}{Init}}(\mbox{\hyperlink{class_csound_unity}{CsoundUnity}} csound, GameObject player, \mbox{\hyperlink{class_csound_channel_controller}{CsoundChannelController}} xChannel, \mbox{\hyperlink{class_csound_channel_controller}{CsoundChannelController}} zChannel, Vector2 minPos, Vector2 maxPos)}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00028}00028         \{}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00029}00029             this.\_csound = csound;}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00030}00030             this.\_xChan = xChannel;}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00031}00031             this.\_zChan = zChannel;}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00032}00032             this.\_minPos = minPos;}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00033}00033             this.\_maxPos = maxPos;}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00034}00034             this.\_caption.\mbox{\hyperlink{class_csound_channel_controller_aec8b9075e86cd06be6b2b37d28b6c203}{text}} = \$\textcolor{stringliteral}{"{}x: \{xChannel.channel\}: \{xChannel.value:0.00\}\(\backslash\)n"{}} +}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00035}00035                 \$\textcolor{stringliteral}{"{}z: \{(zChannel != null ? zChannel.channel : string.Empty)\} : \{(zChannel != null ? zChannel.value : float.NaN):0.00\}"{}};}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00036}00036             this.name = \$\textcolor{stringliteral}{"{}x: \{xChannel.channel\} -\/ z: \{(zChannel != null ? zChannel.channel : string.Empty)\}"{}};}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00037}00037             var xPos = \mbox{\hyperlink{class_csound_unity}{CsoundUnity}}.\mbox{\hyperlink{class_csound_unity_a9079e8fbbe4b3a018a1f4a23b9ababf8}{Remap}}(xChannel.\mbox{\hyperlink{class_csound_channel_controller_ad24531483aae2cef8c9d7c7a1c8c327e}{value}}, xChannel.\mbox{\hyperlink{class_csound_channel_controller_aa4b15f9b0a44f0d2ec6fb857d762b5a2}{min}}, xChannel.\mbox{\hyperlink{class_csound_channel_controller_aedde72884f7dbf8acf6032dcce89821d}{max}}, minPos.x, maxPos.x);}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00038}00038             var zPos = zChannel != \textcolor{keyword}{null} ? \mbox{\hyperlink{class_csound_unity}{CsoundUnity}}.\mbox{\hyperlink{class_csound_unity_a9079e8fbbe4b3a018a1f4a23b9ababf8}{Remap}}(zChannel.\mbox{\hyperlink{class_csound_channel_controller_ad24531483aae2cef8c9d7c7a1c8c327e}{value}}, zChannel.\mbox{\hyperlink{class_csound_channel_controller_aa4b15f9b0a44f0d2ec6fb857d762b5a2}{min}}, zChannel.\mbox{\hyperlink{class_csound_channel_controller_aedde72884f7dbf8acf6032dcce89821d}{max}}, minPos.y, maxPos.y) : 0;}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00039}00039             this.transform.position = \textcolor{keyword}{new} Vector3(xPos, this.transform.localScale.y / 2, zPos);}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00040}00040             this.\_player = player;}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00041}00041             var color = Random.ColorHSV(0, 1, 1, 1, 1, 1, 1, 1);}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00042}00042             this.GetComponent<MeshRenderer>().material.color = color;}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00043}00043             this.\_caption.transform.parent.GetComponent<Image>().color = color;}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00044}00044             RemapCanvas(\_player.transform.position);}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00045}00045             \_lastPos = transform.position;}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00046}00046         \}}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00047}00047 }
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00048}00048         \textcolor{keywordtype}{void} Update()}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00049}00049         \{}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00050}00050             \textcolor{keywordflow}{if} (transform.position != \_lastPos)}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00051}00051             \{}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00052}00052                 \_lastPos = transform.position;}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00053}00053                 var pos = this.transform.position;}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00054}00054                 var valX = \mbox{\hyperlink{class_csound_unity}{CsoundUnity}}.\mbox{\hyperlink{class_csound_unity_a9079e8fbbe4b3a018a1f4a23b9ababf8}{Remap}}(pos.x, \_minPos.x, \_maxPos.x, \_xChan.\mbox{\hyperlink{class_csound_channel_controller_aa4b15f9b0a44f0d2ec6fb857d762b5a2}{min}}, \_xChan.\mbox{\hyperlink{class_csound_channel_controller_aedde72884f7dbf8acf6032dcce89821d}{max}}, \textcolor{keyword}{true});}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00055}00055                 this.\_caption.text = \$\textcolor{stringliteral}{"{}x: \{\_xChan.channel\}: \{valX:0.00\}\(\backslash\)n"{}};}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00056}00056                 \textcolor{comment}{//Debug.Log(\$"{}setting channel \{\_xChan.channel\} to val: \{valX\}, minPos: \{\_minPos.x\}, maxPos: \{\_maxPos.x\}, min: \{\_xChan.min\}, max: \{\_xChan.max\}"{});}}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00057}00057                 \_csound.\mbox{\hyperlink{class_csound_unity_a3dda8229f389f764b916d80d9d136c57}{SetChannel}}(\_xChan.\mbox{\hyperlink{class_csound_channel_controller_a8d3dea89569fe00dd54f61fc28a7cbc1}{channel}}, valX);}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00058}00058                 \textcolor{keywordflow}{if} (\_zChan != \textcolor{keyword}{null})}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00059}00059                 \{}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00060}00060                     var valZ = \mbox{\hyperlink{class_csound_unity}{CsoundUnity}}.\mbox{\hyperlink{class_csound_unity_a9079e8fbbe4b3a018a1f4a23b9ababf8}{Remap}}(pos.z, \_minPos.y, \_maxPos.y, \_zChan.\mbox{\hyperlink{class_csound_channel_controller_aa4b15f9b0a44f0d2ec6fb857d762b5a2}{min}}, \_zChan.\mbox{\hyperlink{class_csound_channel_controller_aedde72884f7dbf8acf6032dcce89821d}{max}}, \textcolor{keyword}{true});}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00061}00061                     \_csound.\mbox{\hyperlink{class_csound_unity_a3dda8229f389f764b916d80d9d136c57}{SetChannel}}(\_zChan.\mbox{\hyperlink{class_csound_channel_controller_a8d3dea89569fe00dd54f61fc28a7cbc1}{channel}}, valZ);}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00062}00062                     this.\_caption.text += \$\textcolor{stringliteral}{"{}z: \{\_zChan.channel\}: \{valZ:0.00\}"{}};}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00063}00063                 \}}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00064}00064             \}}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00065}00065             RemapCanvas(\_player.transform.position);}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00066}00066         \}}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00067}00067 }
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00068}00068         \textcolor{keyword}{private} \textcolor{keywordtype}{void} RemapCanvas(Vector3 \_playerPos)}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00069}00069         \{}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00070}00070             this.\_captionCanvas.transform.LookAt(\_playerPos);}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00071}00071             var dist = Vector3.Distance(this.\_caption.transform.position, \_playerPos);}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00072}00072             var remap = \mbox{\hyperlink{class_csound_unity}{CsoundUnity}}.\mbox{\hyperlink{class_csound_unity_a9079e8fbbe4b3a018a1f4a23b9ababf8}{Remap}}(dist, 0, Vector3.Distance(\_minPos, \_maxPos), \_canvasScaleRange.x, \_canvasScaleRange.y);}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00073}00073             this.\_captionCanvas.transform.localScale = \textcolor{keyword}{new} Vector3(-\/remap, remap, 1);}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00074}00074             var remapPos = \mbox{\hyperlink{class_csound_unity}{CsoundUnity}}.\mbox{\hyperlink{class_csound_unity_a9079e8fbbe4b3a018a1f4a23b9ababf8}{Remap}}(dist, 0, Vector3.Distance(\_minPos, \_maxPos), \_canvasPosRange.x, \_canvasPosRange.y);}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00075}00075             var curPos = this.\_captionCanvas.transform.localPosition;}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00076}00076             this.\_captionCanvas.transform.localPosition = \textcolor{keyword}{new} Vector3(curPos.x, remapPos, curPos.z);}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00077}00077 }
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00078}00078         \}}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00079}00079         \textcolor{keyword}{private} \textcolor{keywordtype}{void} OnCollisionStay(Collision collision)}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00080}00080         \{}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00081}00081             \textcolor{comment}{// if colliding with another ParameterSetter push it away}}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00082}00082             \textcolor{keywordflow}{if} (collision.transform.GetComponent<ParameterSetter>() != \textcolor{keyword}{null})}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00083}00083             \{}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00084}00084                 collision.rigidbody.AddForce(\textcolor{keyword}{new} Vector3(\_posCorrectionForce, 0, \_posCorrectionForce));}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00085}00085             \}}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00086}00086         \}}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00087}00087     \}}
\DoxyCodeLine{\Hypertarget{_parameter_setter_8cs_source_l00088}00088 \}}

\end{DoxyCode}
