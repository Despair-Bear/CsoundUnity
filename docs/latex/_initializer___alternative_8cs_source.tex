\hypertarget{_initializer___alternative_8cs_source}{}\doxysection{Initializer\+\_\+\+Alternative.\+cs}
\label{_initializer___alternative_8cs_source}\index{Samples$\sim$/EnvironmentVars/SFDIR/Initializer\_Alternative.cs@{Samples$\sim$/EnvironmentVars/SFDIR/Initializer\_Alternative.cs}}
\mbox{\hyperlink{_initializer___alternative_8cs}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00001}00001 \textcolor{keyword}{using} System.IO;}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00002}00002 \textcolor{keyword}{using} UnityEngine;}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00003}00003 }
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00004}00004 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespace_csound_1_1_environment_vars}{Csound.EnvironmentVars}}}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00005}00005 \{}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00006}\mbox{\hyperlink{class_csound_1_1_environment_vars_1_1_initializer___alternative}{00006}}     \textcolor{keyword}{public} \textcolor{keyword}{class }\mbox{\hyperlink{class_csound_1_1_environment_vars_1_1_initializer___alternative}{Initializer\_Alternative}} : MonoBehaviour}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00007}00007     \{}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00008}00008         [Tooltip(\textcolor{stringliteral}{"{}The names of the sound font files to copy from Resources to the Persistent Data Path folder. "{}} +}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00009}00009             \textcolor{stringliteral}{"{}Don't specify the extension. In this example will be added the '.sf2' extension to the copied files."{}})]}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00010}00010         [SerializeField] \textcolor{keyword}{private} \textcolor{keywordtype}{string}[] \_soundFontsNames;}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00011}00011         [Tooltip(\textcolor{stringliteral}{"{}Ensure this CsoundUnity GameObject is inactive when hitting play, "{}} +}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00012}00012             \textcolor{stringliteral}{"{}otherwise the CsoundUnity initialization will run. "{}} +}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00013}00013             \textcolor{stringliteral}{"{}Setting the Environment Variables on a running Csound instance can have unintended effects."{}})]}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00014}\mbox{\hyperlink{class_csound_1_1_environment_vars_1_1_initializer___alternative_ab8a9b4bd63578e5169e2513593f041d6}{00014}}         \textcolor{keyword}{public} \mbox{\hyperlink{class_csound_unity}{CsoundUnity}} \mbox{\hyperlink{class_csound_1_1_environment_vars_1_1_initializer___alternative_ab8a9b4bd63578e5169e2513593f041d6}{CsoundUnity}};}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00015}00015 }
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00016}00016         \textcolor{comment}{// Start is called before the first frame update}}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00017}00017         \textcolor{keywordtype}{void} Start()}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00018}00018         \{}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00019}00019             \textcolor{keywordflow}{foreach} (var sfName \textcolor{keywordflow}{in} \_soundFontsNames)}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00020}00020             \{}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00021}00021                 var dir = Path.Combine(Application.persistentDataPath, \textcolor{stringliteral}{"{}CsoundFiles"{}});}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00022}00022                 \textcolor{keywordflow}{if} (!Directory.Exists(dir))}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00023}00023                     Directory.CreateDirectory(dir);}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00024}00024 }
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00025}00025                 var destinationPath = Path.Combine(dir, sfName + \textcolor{stringliteral}{"{}.sf2"{}});}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00026}00026                 \textcolor{keywordflow}{if} (!File.Exists(destinationPath))}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00027}00027                 \{}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00028}00028                     var sf = Resources.Load<TextAsset>(sfName);}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00029}00029                     Debug.Log(\$\textcolor{stringliteral}{"{}Writing sf file at path: \{destinationPath\}"{}});}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00030}00030                     Stream s = \textcolor{keyword}{new} MemoryStream(sf.bytes);}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00031}00031                     BinaryReader br = \textcolor{keyword}{new} BinaryReader(s);}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00032}00032                     \textcolor{keyword}{using} (BinaryWriter bw = \textcolor{keyword}{new} BinaryWriter(File.Open(destinationPath, FileMode.OpenOrCreate)))}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00033}00033                     \{}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00034}00034                         bw.Write(br.ReadBytes(sf.bytes.Length));}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00035}00035                     \}}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00036}00036                 \}}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00037}00037             \}}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00038}00038             \textcolor{comment}{// activate CsoundUnity!}}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00039}00039             \mbox{\hyperlink{class_csound_unity}{CsoundUnity}}.gameObject.SetActive(\textcolor{keyword}{true});}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00040}00040         \}}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00041}00041     \}}
\DoxyCodeLine{\Hypertarget{_initializer___alternative_8cs_source_l00042}00042 \}}

\end{DoxyCode}
