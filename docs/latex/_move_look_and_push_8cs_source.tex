\hypertarget{_move_look_and_push_8cs_source}{}\doxysection{Move\+Look\+And\+Push.\+cs}
\label{_move_look_and_push_8cs_source}\index{Samples$\sim$/GranularSynthesis/Scripts/MoveLookAndPush.cs@{Samples$\sim$/GranularSynthesis/Scripts/MoveLookAndPush.cs}}
\mbox{\hyperlink{_move_look_and_push_8cs}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00001}00001 \textcolor{keyword}{using} UnityEngine;}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00002}00002 }
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00003}00003 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespace_csound_1_1_granular_synthesis_1_1_partikkel}{Csound.GranularSynthesis.Partikkel}}}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00004}00004 \{}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00005}\mbox{\hyperlink{class_csound_1_1_granular_synthesis_1_1_partikkel_1_1_move_look_and_push}{00005}}     \textcolor{keyword}{public} \textcolor{keyword}{class }\mbox{\hyperlink{class_csound_1_1_granular_synthesis_1_1_partikkel_1_1_move_look_and_push}{MoveLookAndPush}} : MonoBehaviour}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00006}00006     \{}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00007}00007         [SerializeField] \textcolor{keywordtype}{float} \_mouseSpeed = 3;}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00008}00008         [SerializeField] \textcolor{keywordtype}{float} \_speed = 50;}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00009}00009         [Tooltip(\textcolor{stringliteral}{"{}The push power of the player towards the rigidbodies"{}})]}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00010}00010         [SerializeField] \textcolor{keywordtype}{float} \_pushPower = 2f;}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00011}00011 }
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00012}00012         \textcolor{keyword}{private} CharacterController \_controller;}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00013}00013         \textcolor{keyword}{private} \textcolor{keywordtype}{float} \_startY;}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00014}00014         \textcolor{keyword}{private} Vector2 \_rotation = Vector2.zero;}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00015}00015 }
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00016}00016         \textcolor{comment}{// Start is called before the first frame update}}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00017}00017         \textcolor{keywordtype}{void} Start()}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00018}00018         \{}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00019}00019             \_controller = GetComponent<CharacterController>();}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00020}00020             \_startY = transform.position.y;}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00021}00021         \}}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00022}00022 }
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00023}00023         \textcolor{keywordtype}{void} Update()}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00024}00024         \{}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00025}00025             \_rotation.y += Input.GetAxis(\textcolor{stringliteral}{"{}Mouse X"{}});}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00026}00026             \_rotation.x += -\/Input.GetAxis(\textcolor{stringliteral}{"{}Mouse Y"{}});}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00027}00027 }
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00028}00028             transform.eulerAngles = (Vector2)\_rotation * \_mouseSpeed;}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00029}00029 }
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00030}00030             var x = Input.GetAxis(\textcolor{stringliteral}{"{}Horizontal"{}});}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00031}00031             var z = Input.GetAxis(\textcolor{stringliteral}{"{}Vertical"{}});}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00032}00032             var move = transform.right * x + transform.forward * z;}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00033}00033             move.y = 0.0f;}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00034}00034             \_controller.Move(move * \_speed * Time.deltaTime);}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00035}00035             \textcolor{comment}{// clamp the movement on the y axis}}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00036}00036             transform.position = \textcolor{keyword}{new} Vector3(transform.position.x, \_startY, transform.position.z);}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00037}00037         \}}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00038}00038 }
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00039}00039         \textcolor{keyword}{private} \textcolor{keywordtype}{void} OnControllerColliderHit(ControllerColliderHit hit)}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00040}00040         \{}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00041}00041             Rigidbody body = hit.collider.attachedRigidbody;}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00042}00042             \textcolor{comment}{// do nothing if there's no rigidbody}}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00043}00043             \textcolor{keywordflow}{if} (body == \textcolor{keyword}{null} || body.isKinematic)}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00044}00044                 \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00045}00045             \textcolor{comment}{// this could be superfluous, discards the cases where the player pushes the objects downwards}}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00046}00046             \textcolor{keywordflow}{if} (hit.moveDirection.y < -\/0.1f)}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00047}00047                 \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00048}00048 }
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00049}00049             \textcolor{comment}{// Calculate push direction from move direction,}}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00050}00050             \textcolor{comment}{// only push objects to the sides, never up and down}}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00051}00051             Vector3 pushDir = \textcolor{keyword}{new} Vector3(hit.moveDirection.x, 0, hit.moveDirection.z);}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00052}00052 }
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00053}00053             \textcolor{comment}{// Apply the push}}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00054}00054             \textcolor{comment}{// use a point slightly above the center of the object as the hit position}}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00055}00055             body.AddForceAtPosition(pushDir * \_speed * \_pushPower, \textcolor{keyword}{new} Vector3(0, 0.5f, 0));}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00056}00056         \}}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00057}00057     \}}
\DoxyCodeLine{\Hypertarget{_move_look_and_push_8cs_source_l00058}00058 \}}

\end{DoxyCode}
